steps:
- name: Checkout Repo
  uses: actions/checkout@master
- name: Install Dependencies
  working-directory: ./functions
  run: npm install
- name: Run tests with ${{ matrix.node-version }}
  uses: actions/setup-node@v1
  with:
    node-version: ${{ matrix.node-version }}
- name: Build
  working-directory: ./functions
  run: npm run build-prod
- name: Archive Production Artifact
  uses: actions/upload-artifact@master
  with:
    name: dist
    path: dist
- name: Checkout Repo
  uses: actions/checkout@master
- name: Download Artifact
  uses: actions/download-artifact@master
  with:
    name: dist
- name: Deploy to Firebase
  uses: w9jds/firebase-action@master
  with:
    args: deploy --only hosting
